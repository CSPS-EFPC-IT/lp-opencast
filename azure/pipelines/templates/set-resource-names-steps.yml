parameters:
- name: applicationGatewayNetworkSecurityGroupNameVariableName
  type: string
- name: applicationGatewaySubnetNameVariableName
  type: string
- name: applicationNetworkSecurityGroupNameVariableName
  type: string
- name: applicationSubnetNameVariableName
  type: string
- name: bastionHostNameVariableName
  type: string
- name: bastionHostPublicIpAddressNameVariableName
  type: string
- name: dataNetworkSecurityGroupNameVariableName
  type: string
- name: dataSubnetNameVariableName
  type: string
- name: environmentName
  type: string
- name: solutionName
  type: string
- name: virtualNetworkNameVariableName
  type: string
- name: applicationGatewayNameVariableName
  type: string
- name: keyVaultNameVariableName
  type: string
- name: logAnalyticsWorkspaceNameVariableName
  type: string
- name: applicationGatewayPublicIpAddressNameVariableName
  type: string
- name: applicationGatewayUserAssignedIdentityNameVariableName
  type: string
- name: databaseServerNameVariableName
  type: string

steps:
# Setting Key Vault related resource names.
- task: Bash@3
  displayName: "Set Key Vaults' Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.KeyVault/vaults"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.keyVaultNameVariableName }}"

# Setting Log Analytics Workspace related resource names.
- task: Bash@3
  displayName: "Set Log Analytics Workspace's Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.OperationalInsights/workspaces"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.logAnalyticsWorkspaceNameVariableName }}"

# Setting Network Security Group related resource names.
- task: Bash@3
  displayName: "Set Application Gateway's Network Security Group's Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name "AG"
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/networkSecurityGroups"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.applicationGatewayNetworkSecurityGroupNameVariableName }}"

- task: Bash@3
  displayName: "Set Application's Network Security Group's Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name "App"
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/networkSecurityGroups"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.applicationNetworkSecurityGroupNameVariableName }}"

- task: Bash@3
  displayName: "Set Data's Network Security Group's Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name "Data"
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/networkSecurityGroups"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.dataNetworkSecurityGroupNameVariableName }}"

# Setting Virtual Network related resource names.
- task: Bash@3
  displayName: "Set Virtual Network's Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/virtualNetworks"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.virtualNetworkNameVariableName }}"

- task: Bash@3
  displayName: "Set Application Gateway's VNet Subnet's Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name "AG"
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/virtualNetworks/subnets"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.applicationGatewaySubnetNameVariableName }}"

- task: Bash@3
  displayName: "Set Application's VNet Subnet's Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name "App"
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/virtualNetworks/subnets"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.applicationSubnetNameVariableName }}"

- task: Bash@3
  displayName: "Set Data's VNet Subnet's Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name "Data"
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/virtualNetworks/subnets"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.dataSubnetNameVariableName }}"

# Setting Application Gateway related resource names.
- task: Bash@3
  displayName: "Set Application Gateway's Public IP Address' Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name "AG"
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/publicIPAddresses"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.applicationGatewayPublicIpAddressNameVariableName }}"

- task: Bash@3
  displayName: "Set Application Gateway's Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/applicationGateways"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.applicationGatewayNameVariableName }}"

- task: Bash@3
  displayName: "Set Application Gateway's User Assigned Identity's Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name 'AG'
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.ManagedIdentity/userAssignedIdentities"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.applicationGatewayUserAssignedIdentityNameVariableName }}"

# Setting Bastion Host related resource names.
- task: Bash@3
  displayName: "Set Bastion Host's Public IP Address' Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --component-name "BH"
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/publicIPAddresses"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.bastionHostPublicIpAddressNameVariableName }}"

- task: Bash@3
  displayName: "Set Bastion Host's Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.Network/bastionHosts"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.bastionHostNameVariableName }}"

# Setting DB for MariaDB Server related resource names.
- task: Bash@3
  displayName: "Set DB for MariaDB Server Resource Name Variable"
  inputs:
    filePath: 'lp-opencast/azure/scripts/set_resource_name_variable.sh'
    arguments: >-
      --environment-name "${{ parameters.environmentName }}"
      --resource-type "Microsoft.DBforMariaDB/servers"
      --solution-name "${{ parameters.solutionName }}"
      --variable-name "${{ parameters.databaseServerNameVariableName }}"
